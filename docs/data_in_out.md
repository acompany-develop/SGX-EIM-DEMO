# 入出力データ仕様
2事業者間でIDマッチングを行い**1列分同士の**クロス集計表を得る．

## 入力形式

- カンマ(,)区切りのCSV
- 1列目がマッチングに用いるID列
- headerはなし

例)
```csv
id1,A,10
id2,B,20
id2,C,10
```

## 出力形式

- カンマ(,)区切りのCSV
- 事業者Aの属性が左側，事業者Bの属性が上側に来るようなテーブル
    - 入力テーブルの2列目以降は一つの文字列として解釈される，いわゆる多重集計表
    - 例えば `id,A,10,Male`の場合はIDが`id`，属性が`"A,10,Male"`となる
- 1行1列目は空
- 集計数が `k` 未満の値は0に加工される，閾値`k`はバイナリ実行時に引数で指定する

例)
```csv
,Male,Female
"A,10",6,5
"B,20",7,0
"C,10",0,7
```

## 入出力例

### シンプルパターン

- 入力1 (`k=2`)

```
a,0
b,0
c,0
d,1
e,1
```


- 入力2

```
a,A
b,A
c,A
d,B
e,B
```

- 出力

```
,A,B
0,3,0
1,0,2
```

### 属性が複数

入力1の属性が複数列の場合，1列目の値は`,`区切りで`"`に囲われた値になる．

- 入力1 (`k=2`)
    
```
a,0,1
b,0,1
c,0,1
d,2,1
e,2,1
f,1,2
g,1,2
```


- 入力2

```
a,A
b,A
c,A
d,B
e,B
f,C
g,C
```

- 出力

```
,A,B,C
"0,1",3,0,0
"2,1",0,2,0
"1,2",0,0,2
```

### 属性が複数だが前処理で単一化

入力1の属性列が複数行の場合，最初から1列に加工しておいても結果は同じ．
後処理を考えると`,`以外の文字で区切るとparseがしやすい．

- 入力1 (`k=2`)

```
a,0|1
b,0|1
c,0|1
d,2|1
e,2|1
f,1|2
g,1|2
```


- 入力2

```
a,A
b,A
c,A
d,B
e,B
f,C
g,C
```

- 出力

```
,A,B,C
0|1,3,0,0
2|1,0,2,0
1|2,0,0,2
```

### 集計数が指定した閾値に満たない

[出力形式](#出力形式)の仕様により`k`未満の値は`0`になる．
`k=2`の時、

- 入力1 (`k=2`)

```
a,0
b,1
c,0
d,1
e,0
```


- 入力2

```
a,A
b,A
c,A
d,B
e,B
```

- 出力

本来であれば`0かつB`と`1かつA`と`1かつB`は1が入るが，`k=2`より2未満の値は`0`に置き換えられる．

```
,A,B
0,2,0
1,0,0
```
